"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[259],{5259:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var i=n(3396),a=n(9242);const s={class:"input-group mb-3",style:{"margin-top":"1rem"}},r={style:{display:"flex","justify-content":"end"}};function o(t,e,n,o,l,c){const d=(0,i.up)("ToastEditor"),u=(0,i.up)("BlackBg");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",s,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>t.title=e),class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",placeholder:"제목을 입력해주세요."},null,512),[[a.nr,t.title]])]),t.test?((0,i.wg)(),(0,i.j4)(d,{key:0,onContentChange:c.editorContent,content:t.content},null,8,["onContentChange","content"])):(0,i.kq)("",!0),(0,i._)("div",r,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>c.regArticle&&c.regArticle(...t))},"저장")]),t.loading?((0,i.wg)(),(0,i.j4)(u,{key:1})):(0,i.kq)("",!0)],64)}var l=n(1584),c=n(5033),d={data:function(){return{articleId:0,contentChange:"",title:"",loading:!1,content:"",test:!1}},components:{ToastEditor:l.Z,BlackBg:c.Z},created(){this.articleId=this.$route.query.sn,this.init()},methods:{init(){this.validArticle()},validArticle(){this.loading=!0;const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/adm/articles/valid/"+this.$route.query.sn,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.title=t.data.result.title,this.content=t.data.result.content,this.contentChange=t.data.result.content)})).catch((t=>{this.$swal("",t.response.data.result,"error"),this.$router.push("/article")})).finally((()=>{this.pageChk=!0,this.loading=!1,this.test=!0}))},editorContent(t){this.contentChange=t},regArticle(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};var e=this.contentChange;if(e=e.replace(/&nbsp;/gi,""),e=e.replace(/<br>/gi,""),e=e.replace(/ /gi,""),this.$emptyChk(this.title))return void this.$swal("","제목을 입력해주세요.","warning");if("<p></p>"==e||" "==e)return void this.$swal("","내용을 입력해주세요.","warning");let n={title:this.title,content:this.contentChange};this.loading=!0,this.$axios.post("/api/adm/articles/"+this.articleId+"/form",n,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.$swal("","저장되었습니다.","success"),this.$router.push({path:"/articleDetail",name:"articleDetail",query:{sn:this.articleId}}))})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}}},u=n(89);const h=(0,u.Z)(d,[["render",o]]);var g=h},1584:function(t,e,n){n.d(e,{Z:function(){return l}});var i=n(3396),a=n(6171),s=n(4870),r={__name:"ToastModifyEditor",props:{content:{type:String,required:!0}},emits:["contentChange"],setup(t,{emit:e}){const r=t,o=(0,s.iH)(null),l=n(6265);return(0,i.bv)((()=>{const t=new a.ZP({el:o.value,height:"500px",initialValue:r.content,initialEditType:"wysiwyg",previewStyle:"tab",useDefaultHTMLSanitizer:!1,language:"ko-KR",usageStatistics:!1,hideModeSwitch:!0,hooks:{addImageBlobHook:(t,e)=>{const n={"content-type":"multipart/form-data"},i=new FormData;i.append("multiFile",t),l.post("/api/common/file-upload",i,{headers:n}).then((t=>{e(t.data[0].filePath)})).catch((()=>{})).finally((()=>{}))}},events:{change:()=>e("contentChange",t.getHTML())},toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task"],["table","image","link"],["scrollSync"]]})})),(t,e)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"refEditor",ref:o},null,512))}};const o=r;var l=o},5033:function(t,e,n){n.d(e,{Z:function(){return d}});var i=n(3396);const a=(0,i._)("div",{class:"customdis"},[(0,i._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")])],-1),s=[a];function r(t,e,n,a,r,o){return(0,i.wg)(),(0,i.iD)("div",{class:"black-bg",onClick:e[0]||(e[0]=e=>t.$emit("close"))},s)}var o={},l=n(89);const c=(0,l.Z)(o,[["render",r]]);var d=c}}]);
//# sourceMappingURL=259.f4f52687.js.map