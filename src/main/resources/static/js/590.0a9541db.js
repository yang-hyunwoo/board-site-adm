"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[590],{1590:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var s=a(3396),i=a(9242),l=a(7139);const r={class:"py-5 text-center container"},n={class:"row py-5"},o={class:"col-lg-12 mx-auto"},d={class:"text-white p-5 shadow-sm rounded banner"},c={class:"container"},u={class:"row py-5"},h={class:"mb-3"},g={class:"card-title"},p=(0,s.Uk)("목록 "),m={class:"text-muted fw-normal ms-2"},C={class:"row"},k={class:"col-lg-12"},_={class:""},w={class:"table-responsive"},b={class:"table project-list-table table-nowrap align-middle table-borderless"},f=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"이름"),(0,s._)("th",{scope:"col"},"여행사"),(0,s._)("th",{scope:"col"},"이메일 인증"),(0,s._)("th",{scope:"col"},"권한 인증"),(0,s._)("th",{scope:"col"},"권한 체크")])],-1),v={key:0,class:"badge badge-soft-danger mb-0"},y={key:1,class:"badge badge-soft-info mb-0"},S={key:0,class:"badge badge-soft-danger mb-0"},D={key:1,class:"badge badge-soft-info mb-0"},P={class:"list-inline mb-0"},x={class:"list-inline-item"},L=["onClick"],z=(0,s._)("i",{class:"bx bx-check font-size-18"},null,-1),A=[z],$={class:"list-inline-item dropdown"},I=(0,s._)("a",{class:"text-muted dropdown-toggle font-size-18 px-2",href:"#",role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true"},[(0,s._)("i",{class:"bx bx-dots-vertical-rounded"})],-1),E={class:"dropdown-menu dropdown-menu-end"},T=["onClick"],B=["onClick"];function q(t,e,a,z,q,U){const W=(0,s.up)("BlackBg"),Z=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("section",r,[(0,s._)("div",n,[(0,s._)("div",o,[(0,s._)("div",d,[(0,s.wy)((0,s._)("input",{class:"form-control mr-sm-2 custombar",type:"search",placeholder:"아이디를 입력해주세요.","aria-label":"Search","onUpdate:modelValue":e[0]||(e[0]=e=>t.user_email=e),onKeyup:e[1]||(e[1]=(0,i.D2)(((...t)=>U.travelSearch&&U.travelSearch(...t)),["enter"])),style:{"margin-left":"1rem"}},null,544),[[i.nr,t.user_email]]),(0,s._)("button",{class:"btn btn-outline-success my-2 my-sm-0",style:{"margin-left":"1rem"},onClick:e[2]||(e[2]=(...t)=>U.travelSearch&&U.travelSearch(...t))},"Search")])])])]),(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("div",h,[(0,s._)("h5",g,[p,(0,s._)("span",m,(0,l.zw)(t.startPage)+" to "+(0,l.zw)(t.endPage)+" of "+(0,l.zw)(t.totalList),1)])]),(0,s._)("div",C,[(0,s._)("div",k,[(0,s._)("div",_,[(0,s._)("div",w,[(0,s._)("table",b,[f,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.userList,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e},[(0,s._)("td",null,(0,l.zw)(t.email),1),(0,s._)("td",null,(0,l.zw)(t.name),1),(0,s._)("td",null,(0,l.zw)(t.travelAgencyName),1),(0,s._)("td",null,["미 인증"==t.emailAuth?((0,s.wg)(),(0,s.iD)("span",v,(0,l.zw)(t.emailAuth),1)):(0,s.kq)("",!0),"인증"==t.emailAuth?((0,s.wg)(),(0,s.iD)("span",y,(0,l.zw)(t.emailAuth),1)):(0,s.kq)("",!0)]),(0,s._)("td",null,["미 인증"==t.authChk?((0,s.wg)(),(0,s.iD)("span",S,(0,l.zw)(t.authChk),1)):(0,s.kq)("",!0),"인증"==t.authChk?((0,s.wg)(),(0,s.iD)("span",D,(0,l.zw)(t.authChk),1)):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("ul",P,[(0,s._)("li",x,[(0,s._)("a",{onClick:e=>U.acceptClick(t.id,t.authChk),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Delete",class:"px-2 text-danger",style:{cursor:"pointer"}},A,8,L)]),(0,s._)("li",$,[I,(0,s._)("div",E,[(0,s._)("a",{class:"dropdown-item",onClick:e=>U.acceptClick(t.id,t.authChk),style:{cursor:"pointer"}},"확인",8,T),(0,s._)("a",{class:"dropdown-item",onClick:e=>U.reDeleteClick(t.id,t.authChk)},"취소",8,B)])])])])])))),128))])])])])])]),t.loading?((0,s.wg)(),(0,s.j4)(W,{key:0})):(0,s.kq)("",!0),t.pageChk?((0,s.wg)(),(0,s.j4)(Z,{key:1,pageListItem:t.pageListItem,onPageCurrent:U.pageCurr,pageTotal:t.pageTotal},null,8,["pageListItem","onPageCurrent","pageTotal"])):(0,s.kq)("",!0)])])],64)}var U=a(360),W=a(5033),Z={data:function(){return{pageListItem:10,page:0,travel_title:"",pageTotal:0,pageChk:!1,userList:[],loading:!1,search_type:"TITLE",date_type:"CREATEDAT",startDate:"",startDateSplit:"",endDate:"",endDateSplit:"",adminAuth:"",startPage:"",endPage:"",totalList:"",user_email:""}},components:{Pagination:U.Z,BlackBg:W.Z},created(){this.init()},methods:{init(){this.dateInit(),this.adminList(),this.authChk()},authChk(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/adm/admin/auth",{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.adminAuth=t.data.result.role)})).catch((()=>{this.$swal("","잠시후 다시 이용해주세요.","error")})).finally((()=>{}))},dateInit(){let t=new Date,e=String(t.getFullYear()),a=String(t.getMonth()+1<10?"0"+t.getMonth()+1:t.getMonth()+1),s=String(t.getDate()<10?"0"+t.getDate():t.getDate());this.startDate=e+"-"+a+"-01",this.startDateSplit=e+a+"01",this.endDate=e+"-"+a+"-"+s,this.endDateSplit=e+a+s},adminList(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};let e={page:this.page,searchKeyWord:this.user_email};this.loading=!0,this.$axios.get("/api/adm/auth",{headers:t,params:e}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.pageTotal=t.data.result.totalElements,this.totalList=t.data.result.totalElements,this.startPage=t.data.result.number*t.data.result.size+1,t.data.result.numberOfElements==t.data.result.size?this.endPage=(t.data.result.number+1)*t.data.result.size:this.endPage=t.data.result.number*t.data.result.size+t.data.result.numberOfElements,this.userList=[],t.data.result.content.forEach((t=>{let e=[];e.email=t.email,e.name=t.name,e.id=t.id,e.travelAgencyName=t.travelAgencyName,t.emailAuth?e.emailAuth="인증":e.emailAuth="미 인증",t.authChk?e.authChk="인증":e.authChk="미 인증",this.userList.push(e)})))})).catch((()=>{this.$swal("","잠시후 다시 이용해주세요22.","error")})).finally((()=>{this.pageChk=!0,this.loading=!1}))},acceptClick(t,e){if("미 인증"==e){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.put("/api/adm/auth/"+t+"/accept","",{headers:e}).then((t=>{"SUCCESS"==t.data.resultCode&&this.adminList()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}else this.$swal("","이미 인증된 사용자 입니다.","warning")},reDeleteClick(t,e){if("인증"==e){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.put("/api/adm/auth/"+t+"/re-accept","",{headers:e}).then((t=>{"SUCCESS"==t.data.resultCode&&this.adminList()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}else this.$swal("","이미 사용중인 여행사 입니다.","warning")},sortClcik(t,e){let a=this.formSort.newSort[e];""!=a&&null!=a||(a=0);const s={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.put("/api/adm/agency-trip/"+t+"/"+a+"/sort","",{headers:s}).then((t=>{"SUCCESS"==t.data.resultCode&&this.adminList()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))},pageCurr(t){this.page=t-1,this.adminList()},travelSearch(){this.page=0,this.pageChk=!1,this.adminList()},travelWriteClick(){this.$router.push({path:"/TravelWrite",name:"travelWrite"})},todoCclick(t){this.$router.push({path:"/TravelDetail",name:"travelDetail",query:{sn:t}})},updateClick(t){this.$router.push({path:"/travelModify",name:"travelModify",query:{sn:t}})}},watch:{startDate(){let t=this.startDate.split("-");this.startDateSplit=t[0]+t[1]+t[2]},endDate(){let t=this.endDate.split("-");this.endDateSplit=t[0]+t[1]+t[2]}}},N=a(89);const M=(0,N.Z)(Z,[["render",q]]);var j=M},360:function(t,e,a){a.d(e,{Z:function(){return u}});var s=a(3396);const i={class:"pagination"},l={class:"overflow-auto"},r={class:"mt-3"};function n(t,e,a,n,o,d){const c=(0,s.up)("b-pagination"),u=(0,s.up)("b-card");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(u,{style:{"justify-content":"center"}},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",r,[(0,s.Wm)(c,{modelValue:t.ex4CurrentPage,"onUpdate:modelValue":e[0]||(e[0]=e=>t.ex4CurrentPage=e),pills:"","total-rows":t.ex4Rows,onPageClick:d.pageClick,"per-page":t.perPage,currPage:a.currPage},null,8,["modelValue","total-rows","onPageClick","per-page","currPage"])])])])),_:1}),(0,s.WI)(t.$slots,"default")])}var o={props:{pageListItem:Number,pageTotal:Number,currPage:{type:Number,default:1}},data:function(){return{ex4CurrentPage:this.currPage,ex4Rows:this.pageTotal,perPage:this.pageListItem}},created(){console.log(this.currPage)},methods:{pageClick:function(t,e){this.ex4CurrentPage=e,this.$emit("pageCurrent",this.ex4CurrentPage)}}},d=a(89);const c=(0,d.Z)(o,[["render",n]]);var u=c},5033:function(t,e,a){a.d(e,{Z:function(){return c}});var s=a(3396);const i=(0,s._)("div",{class:"customdis"},[(0,s._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")])],-1),l=[i];function r(t,e,a,i,r,n){return(0,s.wg)(),(0,s.iD)("div",{class:"black-bg",onClick:e[0]||(e[0]=e=>t.$emit("close"))},l)}var n={},o=a(89);const d=(0,o.Z)(n,[["render",r]]);var c=d}}]);
//# sourceMappingURL=590.0a9541db.js.map