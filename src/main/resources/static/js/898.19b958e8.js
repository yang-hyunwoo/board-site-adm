"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[898],{1898:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var i=a(3396),s=a(9242),n=a(7139);const l=e=>((0,i.dD)("data-v-8c6e1c16"),e=e(),(0,i.Cn)(),e),r={id:"contact",class:"contact-area section-padding"},o={class:"container"},d={class:"row"},c={class:"col-lg-7"},h={class:"contact"},u={class:"row",style:{"margin-top":"2rem"}},g={class:"form-group col-md-12"},m={key:1},p={class:"form-group col-md-12",style:{"margin-top":"1rem"}},y={class:"form-group col-md-12",style:{"margin-top":"1rem"}},f={class:"col-md-12 text-center",style:{"margin-top":"1rem"}},w={class:"col-lg-5",style:{"margin-top":"2rem"}},v=l((()=>(0,i._)("i",{class:"fa fa-map-marker"},null,-1))),_=l((()=>(0,i._)("h4",null,"주소",-1))),k={class:"single_address"},C=l((()=>(0,i._)("i",{class:"fa fa-phone"},null,-1))),b=l((()=>(0,i._)("h4",{style:{"margin-bottom":"1rem"}},"전화번호",-1))),I=(0,i.Uk)("- "),$=(0,i.Uk)("- "),S={class:"single_address"},U={class:"file-label",for:"chooseFile"},x=l((()=>(0,i._)("i",{class:"fa fa-image"},null,-1))),A=(0,i.Uk)("썸네일 "),q={key:0,style:{width:"400px",height:"250px"}},D=["src"];function E(e,t,a,l,E,B){const N=(0,i.up)("ToastEditor"),Z=(0,i.up)("BlackBg");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",r,[(0,i._)("div",o,[(0,i._)("div",d,[(0,i._)("div",c,[(0,i._)("div",h,[(0,i._)("div",u,[(0,i._)("div",g,["SUPER"==e.adminAuth?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,type:"text",name:"name",class:"form-control",placeholder:"여행사 명",required:"required","onUpdate:modelValue":t[0]||(t[0]=t=>e.agencyName=t)},null,512)),[[s.nr,e.agencyName]]):(0,i.kq)("",!0),"ADMIN"==e.adminAuth?((0,i.wg)(),(0,i.iD)("p",m,(0,n.zw)(e.agencyName),1)):(0,i.kq)("",!0)]),(0,i._)("div",p,[(0,i.wy)((0,i._)("input",{type:"text",name:"subject",class:"form-control",placeholder:"코멘트",required:"required","onUpdate:modelValue":t[1]||(t[1]=t=>e.agencyComment=t)},null,512),[[s.nr,e.agencyComment]])]),(0,i._)("div",y,[e.test?((0,i.wg)(),(0,i.j4)(N,{key:0,onContentChange:B.editorContent,content:e.content},null,8,["onContentChange","content"])):(0,i.kq)("",!0)]),(0,i._)("div",f,[(0,i._)("button",{class:"btn btn-contact-bg",onClick:t[2]||(t[2]=e=>B.regAgency())},"등록")])])])]),(0,i._)("div",w,[(0,i._)("div",{class:"single_address",onClick:t[3]||(t[3]=e=>B.address())},[v,_,(0,i._)("p",null,(0,n.zw)(e.roadAddress),1)]),(0,i._)("div",k,[C,b,(0,i.wy)((0,i._)("input",{type:"text",style:{width:"80px"},"onUpdate:modelValue":t[4]||(t[4]=t=>e.tel1=t)},null,512),[[s.nr,e.tel1]]),I,(0,i.wy)((0,i._)("input",{type:"text",style:{width:"80px"},"onUpdate:modelValue":t[5]||(t[5]=t=>e.tel2=t)},null,512),[[s.nr,e.tel2]]),$,(0,i.wy)((0,i._)("input",{type:"text",style:{width:"80px"},"onUpdate:modelValue":t[6]||(t[6]=t=>e.tel3=t)},null,512),[[s.nr,e.tel3]])]),(0,i._)("div",S,[(0,i._)("label",U,[(0,i._)("input",{class:"file",id:"chooseFile",type:"file",onClick:t[7]||(t[7]=(...e)=>B.resetImageUploader&&B.resetImageUploader(...e)),onChange:t[8]||(t[8]=(...e)=>B.upload&&B.upload(...e)),accept:"image/png, image/jpeg, image/gif",ref:"imageUploader"},null,544),x,(0,i._)("h4",null,[A,(0,i._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=e=>B.resetImage())},"썸네일 삭제")])])]),""!=e.preview?((0,i.wg)(),(0,i.iD)("div",q,[(0,i._)("img",{src:e.preview,style:{width:"100%",height:"100%"}},null,8,D)])):(0,i.kq)("",!0)])])])]),e.loading?((0,i.wg)(),(0,i.j4)(Z,{key:0})):(0,i.kq)("",!0)],64)}var B=a(1584),N=a(5033),Z={data:function(){return{agencyId:0,agencyName:"",agencyComment:"",tel1:"",tel2:"",tel3:"",roadAddress:"",contentChange:"",title:"",loading:!1,content:"",test:!1,preview:"",citySelect:"",fileId:"",adminAuth:""}},components:{ToastEditor:B.Z,BlackBg:N.Z},created(){this.agencyId=this.$route.query.sn,this.init()},methods:{init(){this.validAgency(),this.authChk()},authChk(){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/adm/admin/auth",{headers:e}).then((e=>{"SUCCESS"==e.data.resultCode&&(this.adminAuth=e.data.result.role)})).catch((()=>{this.$swal("","잠시후 다시 이용해주세요.","error")})).finally((()=>{}))},validAgency(){this.loading=!0;const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/adm/agency/"+this.agencyId,{headers:e}).then((t=>{if("SUCCESS"==t.data.resultCode){let a=t.data.result.tel.split("-");this.agencyName=t.data.result.name,this.agencyComment=t.data.result.comment,this.title=t.data.result.title,this.content=t.data.result.detail,this.tel1=a[0],this.tel2=a[1],this.tel3=a[2],this.fileId=t.data.result.fileId,this.roadAddress=t.data.result.address,this.contentChange=t.data.result.detail,null!=t.data.result.fileId&&this.$axios.get("/api/common/image/"+t.data.result.fileId+"/1",{headers:e}).then((e=>{this.preview=e.data})).catch((()=>{})).finally((()=>{}))}})).catch((e=>{this.$swal("",e.response.data.result,"error"),this.$router.push("/agencyList")})).finally((()=>{this.pageChk=!0,this.loading=!1,this.test=!0}))},editorContent(e){this.contentChange=e},async regAgency(){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};var t=this.contentChange;if(t=t.replace(/&nbsp;/gi,""),t=t.replace(/<br>/gi,""),t=t.replace(/ /gi,""),this.$emptyChk(this.agencyName))return void this.$swal("","여행사 명을 입력해주세요.","warning");if(this.$emptyChk(this.tel1)||this.$emptyChk(this.tel2)||this.$emptyChk(this.tel3))return void this.$swal("","번호를 입력해주세요.","warning");if("<p></p>"==t||" "==t)return void this.$swal("","내용을 입력해주세요.","warning");if(""!=this.file||void 0!=this.file){const e={"content-type":"multipart/form-data"},t=new FormData;t.append("multiFile",this.file),await this.$axios.post("/api/common/file-upload",t,{imageheaders:e}).then((e=>{this.fileId=e.data[0].fileId})).catch((()=>{})).finally((()=>{}))}let a={name:this.agencyName,address:this.roadAddress,tel:this.tel1+"-"+this.tel2+"-"+this.tel3,detail:this.contentChange,file_id:this.fileId,comment:this.agencyComment};this.loading=!0,await this.$axios.put("/api/adm/agency/"+this.agencyId+"/form",a,{headers:e}).then((e=>{"SUCCESS"==e.data.resultCode&&(this.$swal("","저장되었습니다.","success"),this.$router.push({path:"/agencyDetail",name:"agencyDetail",query:{sn:this.agencyId}}))})).catch((e=>{this.$swal("",e.response.data.result,"error")})).finally((()=>{this.loading=!1}))},upload(e){this.file=e.target.files[0];var t=URL.createObjectURL(this.file);this.preview=t},resetImageUploader(){this.$refs.imageUploader.value=""},resetImage(){this.fileId="",this.file="",this.preview="",this.$refs.imageUploader.value=""},address(){new window.daum.Postcode({oncomplete:e=>{this.roadAddress=e.roadAddress}}).open()}}},z=a(89);const F=(0,z.Z)(Z,[["render",E],["__scopeId","data-v-8c6e1c16"]]);var L=F},1584:function(e,t,a){a.d(t,{Z:function(){return o}});var i=a(3396),s=a(6171),n=a(4870),l={__name:"ToastModifyEditor",props:{content:{type:String,required:!0}},emits:["contentChange"],setup(e,{emit:t}){const l=e,r=(0,n.iH)(null),o=a(6265);return(0,i.bv)((()=>{const e=new s.ZP({el:r.value,height:"500px",initialValue:l.content,initialEditType:"wysiwyg",previewStyle:"tab",useDefaultHTMLSanitizer:!1,language:"ko-KR",usageStatistics:!1,hideModeSwitch:!0,hooks:{addImageBlobHook:(e,t)=>{const a={"content-type":"multipart/form-data"},i=new FormData;i.append("multiFile",e),o.post("/api/common/file-upload",i,{headers:a}).then((e=>{t(e.data[0].filePath)})).catch((()=>{})).finally((()=>{}))}},events:{change:()=>t("contentChange",e.getHTML())},toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task"],["table","image","link"],["scrollSync"]]})})),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"refEditor",ref:r},null,512))}};const r=l;var o=r},5033:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(3396);const s=(0,i._)("div",{class:"customdis"},[(0,i._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")])],-1),n=[s];function l(e,t,a,s,l,r){return(0,i.wg)(),(0,i.iD)("div",{class:"black-bg",onClick:t[0]||(t[0]=t=>e.$emit("close"))},n)}var r={},o=a(89);const d=(0,o.Z)(r,[["render",l]]);var c=d}}]);
//# sourceMappingURL=898.19b958e8.js.map