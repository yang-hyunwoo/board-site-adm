"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[716],{1584:function(t,e,i){i.d(e,{Z:function(){return r}});var a=i(3396),n=i(6171),o=i(4870),l={__name:"ToastModifyEditor",props:{content:{type:String,required:!0}},emits:["contentChange"],setup(t,{emit:e}){const l=t,s=(0,o.iH)(null),r=i(6265);return(0,a.bv)((()=>{const t=new n.ZP({el:s.value,height:"500px",initialValue:l.content,initialEditType:"wysiwyg",previewStyle:"tab",useDefaultHTMLSanitizer:!1,language:"ko-KR",usageStatistics:!1,hideModeSwitch:!0,hooks:{addImageBlobHook:(t,e)=>{const i={"content-type":"multipart/form-data"},a=new FormData;a.append("multiFile",t),r.post("/api/common/file-upload",a,{headers:i}).then((t=>{e(t.data[0].filePath)})).catch((()=>{})).finally((()=>{}))}},events:{change:()=>e("contentChange",t.getHTML())},toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task"],["table","image","link"],["scrollSync"]]})})),(t,e)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"refEditor",ref:s},null,512))}};const s=l;var r=s},5033:function(t,e,i){i.d(e,{Z:function(){return c}});var a=i(3396);const n=(0,a._)("div",{class:"customdis"},[(0,a._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")])],-1),o=[n];function l(t,e,i,n,l,s){return(0,a.wg)(),(0,a.iD)("div",{class:"black-bg",onClick:e[0]||(e[0]=e=>t.$emit("close"))},o)}var s={},r=i(89);const d=(0,r.Z)(s,[["render",l]]);var c=d},6716:function(t,e,i){i.r(e),i.d(e,{default:function(){return C}});var a=i(3396),n=i(9242);const o=t=>((0,a.dD)("data-v-793599b8"),t=t(),(0,a.Cn)(),t),l={class:"input-group mb-3",style:{"margin-top":"1rem"}},s={style:{display:"block",width:"100%",margin:"1rem"}},r=(0,a.Uk)(" 도시 명 : "),d=(0,a.uE)('<option value="" data-v-793599b8>선택하세요.</option><option value="서울" data-v-793599b8>서울</option><option value="부산" data-v-793599b8>부산</option><option value="울산" data-v-793599b8>울산</option><option value="대구" data-v-793599b8>대구</option><option value="대전" data-v-793599b8>대전</option><option value="충남" data-v-793599b8>충남</option><option value="제주도" data-v-793599b8>제주도</option>',8),c=[d],u=(0,a.Uk)(" 썸네일 "),h={key:0,style:{width:"500px",height:"300px"}},p=["src"],g=o((()=>(0,a._)("label",{class:"file-label",for:"chooseFile"},"썸네일 추가",-1))),m={style:{display:"flex","justify-content":"end"}};function f(t,e,i,o,d,f){const v=(0,a.up)("ToastEditor"),y=(0,a.up)("BlackBg");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",l,[(0,a._)("div",s,[r,(0,a.wy)((0,a._)("select",{style:{width:"10%"},"onUpdate:modelValue":e[0]||(e[0]=e=>t.citySelect=e)},c,512),[[n.bM,t.citySelect]])]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=e=>t.title=e),class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",placeholder:"제목을 입력해주세요."},null,512),[[n.nr,t.title]])]),t.test?((0,a.wg)(),(0,a.j4)(v,{key:0,onContentChange:f.editorContent,content:t.content},null,8,["onContentChange","content"])):(0,a.kq)("",!0),(0,a._)("div",null,[u,""!=t.preview?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("img",{src:t.preview,style:{width:"100%",height:"100%"}},null,8,p)])):(0,a.kq)("",!0),g,(0,a._)("input",{class:"file",id:"chooseFile",type:"file",onClick:e[2]||(e[2]=(...t)=>f.resetImageUploader&&f.resetImageUploader(...t)),onChange:e[3]||(e[3]=(...t)=>f.upload&&f.upload(...t)),accept:"image/png, image/jpeg, image/gif",ref:"imageUploader"},null,544),(0,a._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=t=>f.resetImage())},"썸네일 삭제")]),(0,a._)("div",m,[(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>f.regArticle&&f.regArticle(...t))},"저장")]),t.loading?((0,a.wg)(),(0,a.j4)(y,{key:1})):(0,a.kq)("",!0)],64)}var v=i(1584),y=i(5033),b={data:function(){return{tourId:0,contentChange:"",title:"",loading:!1,content:"",test:!1,preview:"",citySelect:"",fileId:""}},components:{ToastEditor:v.Z,BlackBg:y.Z},created(){this.tourId=this.$route.query.sn,this.init()},methods:{init(){this.validArticle()},validArticle(){this.loading=!0;const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/adm/tour/valid/"+this.$route.query.sn,{headers:t}).then((e=>{"SUCCESS"==e.data.resultCode&&(this.citySelect=e.data.result.city,this.title=e.data.result.title,this.content=e.data.result.content,this.contentChange=e.data.result.content,this.fileId=e.data.result.thumbnailId,null!=e.data.result.thumbnailId&&this.$axios.get("/api/common/image/"+e.data.result.thumbnailId+"/1",{headers:t}).then((t=>{this.preview=t.data})).catch((()=>{})).finally((()=>{})))})).catch((t=>{this.$swal("",t.response.data.result,"error"),this.$router.push("/tourList")})).finally((()=>{this.pageChk=!0,this.loading=!1,this.test=!0}))},editorContent(t){this.contentChange=t},async regArticle(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};var e=this.contentChange;if(e=e.replace(/&nbsp;/gi,""),e=e.replace(/<br>/gi,""),e=e.replace(/ /gi,""),this.$emptyChk(this.title))return void this.$swal("","제목을 입력해주세요.","warning");if("<p></p>"==e||" "==e)return void this.$swal("","내용을 입력해주세요.","warning");if(""!=this.file||void 0!=this.file){const t={"content-type":"multipart/form-data"},e=new FormData;e.append("multiFile",this.file),await this.$axios.post("/api/common/file-upload",e,{imageheaders:t}).then((t=>{this.fileId=t.data[0].fileId})).catch((()=>{})).finally((()=>{}))}let i={title:this.title,content:this.contentChange,city:this.citySelect,thumbnailId:this.fileId,id:this.tourId};this.loading=!0,await this.$axios.put("/api/adm/tour/"+this.tourId+"/form",i,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.$swal("","저장되었습니다.","success"),this.$router.push({path:"/tourDetail",name:"tourDetail",query:{sn:this.tourId}}))})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))},upload(t){this.file=t.target.files[0];var e=URL.createObjectURL(this.file);this.preview=e},resetImageUploader(){this.$refs.imageUploader.value=""},resetImage(){this.fileId="",this.file="",this.preview="",this.$refs.imageUploader.value=""}}},w=i(89);const k=(0,w.Z)(b,[["render",f],["__scopeId","data-v-793599b8"]]);var C=k}}]);
//# sourceMappingURL=716.b8e29437.js.map