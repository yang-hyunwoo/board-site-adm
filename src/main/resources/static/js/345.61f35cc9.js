"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[345],{360:function(t,e,a){a.d(e,{Z:function(){return u}});var s=a(3396);const l={class:"pagination"},r={class:"overflow-auto"},i={class:"mt-3"};function n(t,e,a,n,o,c){const d=(0,s.up)("b-pagination"),u=(0,s.up)("b-card");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(u,{style:{"justify-content":"center"}},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",i,[(0,s.Wm)(d,{modelValue:t.ex4CurrentPage,"onUpdate:modelValue":e[0]||(e[0]=e=>t.ex4CurrentPage=e),pills:"","total-rows":t.ex4Rows,onPageClick:c.pageClick,"per-page":t.perPage,currPage:a.currPage},null,8,["modelValue","total-rows","onPageClick","per-page","currPage"])])])])),_:1}),(0,s.WI)(t.$slots,"default")])}var o={props:{pageListItem:Number,pageTotal:Number,currPage:{type:Number,default:1}},data:function(){return{ex4CurrentPage:this.currPage,ex4Rows:this.pageTotal,perPage:this.pageListItem}},created(){console.log(this.currPage)},methods:{pageClick:function(t,e){this.ex4CurrentPage=e,this.$emit("pageCurrent",this.ex4CurrentPage)}}},c=a(89);const d=(0,c.Z)(o,[["render",n]]);var u=d},5033:function(t,e,a){a.d(e,{Z:function(){return d}});var s=a(3396);const l=(0,s._)("div",{class:"customdis"},[(0,s._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")])],-1),r=[l];function i(t,e,a,l,i,n){return(0,s.wg)(),(0,s.iD)("div",{class:"black-bg",onClick:e[0]||(e[0]=e=>t.$emit("close"))},r)}var n={},o=a(89);const c=(0,o.Z)(n,[["render",i]]);var d=c},2345:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});var s=a(3396),l=a(7139);const r=(0,s.uE)('<section class="py-5 text-center container"><div class="row py-5"><div class="col-lg-12 mx-auto"><div class="text-white p-5 shadow-sm rounded banner"><h1 class="display-4">QR</h1></div></div></div></section>',1),i={class:"container"},n={class:"row py-5"},o={class:"mb-3"},c={class:"card-title"},d=(0,s.Uk)("목록 "),u={class:"text-muted fw-normal ms-2"},g={class:"row"},p={class:"col-lg-12"},h={class:""},m={class:"table-responsive"},_={class:"table project-list-table table-nowrap align-middle table-borderless"},v=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"제목"),(0,s._)("th",{scope:"col"},"도시"),(0,s._)("th",{scope:"col"},"여행사"),(0,s._)("th",{scope:"col"},"가격/할인율/할인가격"),(0,s._)("th",{scope:"col"},"출발일"),(0,s._)("th",{scope:"col",style:{width:"200px"}},"QR입장")])],-1),b=["onClick"],y=["src"],w={class:"text-body"},f={class:"badge badge-soft-info mb-0"},k={class:"badge badge-soft-primary mb-0"},C={class:"badge badge-soft-danger mb-0"},P=["onClick"];function D(t,e,a,D,x,S){const z=(0,s.up)("BlackBg"),I=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[r,(0,s._)("div",i,[(0,s._)("div",n,[(0,s._)("div",o,[(0,s._)("h5",c,[d,(0,s._)("span",u,(0,l.zw)(t.startPage)+" to "+(0,l.zw)(t.endPage)+" of "+(0,l.zw)(t.totalList),1)])]),(0,s._)("div",g,[(0,s._)("div",p,[(0,s._)("div",h,[(0,s._)("div",m,[(0,s._)("table",_,[v,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.travel_list,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e},[(0,s._)("td",{onClick:e=>S.todoCclick(t.id),style:{cursor:"pointer"}},[t.img_real?((0,s.wg)(),(0,s.iD)("img",{key:0,src:t.img,alt:"",class:"avatar-sm rounded-circle me-2"},null,8,y)):(0,s.kq)("",!0),(0,s._)("a",w,(0,l.zw)(t.title),1)],8,b),(0,s._)("td",null,(0,l.zw)(t.city),1),(0,s._)("td",null,(0,l.zw)(t.travelAgencyName),1),(0,s._)("td",null,[(0,s._)("span",f,(0,l.zw)(t.real_pay),1),(0,s._)("span",k,(0,l.zw)(t.sale_percent),1),(0,s._)("span",C,(0,l.zw)(t.sale_pay),1)]),(0,s._)("td",null,(0,l.zw)(t.trip_start_de),1),(0,s._)("td",null,[(0,s._)("button",{class:"btn btn-primary",style:{"margin-left":"3px",height:"35px"},onClick:e=>S.qrScan(t.id)},"QR스캔",8,P)])])))),128))])])])])])]),t.loading?((0,s.wg)(),(0,s.j4)(z,{key:0})):(0,s.kq)("",!0),t.pageChk?((0,s.wg)(),(0,s.j4)(I,{key:1,pageListItem:t.pageListItem,onDe:t.de,pageTotal:t.pageTotal},null,8,["pageListItem","onDe","pageTotal"])):(0,s.kq)("",!0)])])],64)}var x=a(360),S=a(5033),z={data:function(){return{pageListItem:10,page:0,travel_title:"",pageTotal:0,pageChk:!1,travel_list:[],loading:!1,date_type:"STARTAT",startDate:"",adminAuth:"",startPage:"",endPage:"",totalList:"",travelAgencyListSort:""}},components:{Pagination:x.Z,BlackBg:S.Z},created(){this.init()},methods:{init(){this.dateInit(),this.travelList(),this.authChk()},authChk(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/adm/admin/auth",{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.adminAuth=t.data.result.role)})).catch((()=>{this.$swal("","잠시후 다시 이용해주세요.","error")})).finally((()=>{}))},dateInit(){let t=new Date,e=String(t.getFullYear()),a=String((t.getMonth(),t.getMonth()+1)),s=String(t.getDate()<10?"0"+t.getDate():t.getDate());a<10&&(a="0"+a,console.log(a)),this.startDate=e+"-"+a+"-"+s},travelList(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};let e={page:this.page,startedAt:this.startDate,endAt:this.startDate};this.loading=!0,this.$axios.get("/api/adm/agency-trip/qrcode/triplist",{headers:t,params:e}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.pageTotal=t.data.result.totalElements,this.totalList=t.data.result.totalElements,this.startPage=t.data.result.number*t.data.result.size+1,t.data.result.numberOfElements==t.data.result.size?this.endPage=(t.data.result.number+1)*t.data.result.size:this.endPage=t.data.result.number*t.data.result.size+t.data.result.numberOfElements,this.travel_list=[],console.log(t.data.result.content),t.data.result.content.forEach((t=>{let e=[];e.title=t.title.substr(0,6),e.travelAgencyName=t.travelAgencyName,e.id=t.id,e.city=t.city,e.trip_start_de=this.$splitDateHyphen(t.travelRealTripAt),e.real_pay=t.real_paid+"원",e.sale_percent=t.sale_percent+"%",e.sale_pay=t.sale_paid+"원",null==t.thumnbnailFileId||""==t.thumnbnailFileId?e.img_real=!1:e.img_real=!0,e.img="/api/common/image/thumb/"+t.thumnbnailFileId+"/1",this.travel_list.push(e)})))})).catch((()=>{this.$swal("","잠시후 다시 이용해주세요.","error")})).finally((()=>{this.pageChk=!0,this.loading=!1}))},pageCurr(t){this.page=t-1,this.travelList()},todoCclick(t){this.$router.push({path:"/TravelDetail",name:"travelDetail",query:{sn:t}})},qrScan(t){this.$router.push({path:"/travelQrScan",name:"travelQrScan",query:{sn:t}})}}},I=a(89);const L=(0,I.Z)(z,[["render",D]]);var A=L}}]);
//# sourceMappingURL=345.61f35cc9.js.map