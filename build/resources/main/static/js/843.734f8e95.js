"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[843],{7284:function(t,e,i){i.d(e,{Z:function(){return r}});var a=i(3396),n=i(6171),o=i(4870),l={__name:"ToastEditor",emits:["contentChange"],setup(t,{emit:e}){const l=(0,o.iH)(null),s=i(6265);return(0,a.bv)((()=>{console.log("onMounted");const t=new n.ZP({el:l.value,height:"500px",initialValue:"",initialEditType:"wysiwyg",previewStyle:"tab",useDefaultHTMLSanitizer:!1,language:"ko-KR",usageStatistics:!1,hideModeSwitch:!0,hooks:{addImageBlobHook:(t,e)=>{const i={"content-type":"multipart/form-data"},a=new FormData;a.append("multiFile",t),s.post("/api/common/file-upload",a,{headers:i}).then((t=>{e(t.data[0].filePath)})).catch((()=>{})).finally((()=>{}))}},events:{change:()=>e("contentChange",t.getHTML())},toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task"],["table","image","link"],["scrollSync"]]})})),(t,e)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"refEditor",ref:l},null,512))}};const s=l;var r=s},6843:function(t,e,i){i.r(e),i.d(e,{default:function(){return C}});var a=i(3396),n=i(9242);const o=t=>((0,a.dD)("data-v-39d75f7c"),t=t(),(0,a.Cn)(),t),l={class:"input-group mb-3",style:{"margin-top":"1rem"}},s={style:{display:"block",width:"100%",margin:"1rem"}},r=(0,a.Uk)(" 도시 명 : "),d=(0,a.uE)('<option value="" data-v-39d75f7c>선택하세요.</option><option value="서울" data-v-39d75f7c>서울</option><option value="부산" data-v-39d75f7c>부산</option><option value="울산" data-v-39d75f7c>울산</option><option value="대구" data-v-39d75f7c>대구</option><option value="대전" data-v-39d75f7c>대전</option><option value="충남" data-v-39d75f7c>충남</option><option value="제주도" data-v-39d75f7c>제주도</option>',8),c=[d],p=(0,a.Uk)(" 썸네일 "),u={key:0,style:{width:"500px",height:"300px"}},h=["src"],g=o((()=>(0,a._)("label",{class:"file-label",for:"chooseFile"},"썸네일 추가",-1))),f={style:{display:"flex","justify-content":"end"}};function m(t,e,i,o,d,m){const v=(0,a.up)("ToastEditor");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",l,[(0,a._)("div",s,[r,(0,a.wy)((0,a._)("select",{style:{width:"10%"},"onUpdate:modelValue":e[0]||(e[0]=e=>t.citySelect=e)},c,512),[[n.bM,t.citySelect]])]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=e=>t.title=e),class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",placeholder:"제목을 입력해주세요."},null,512),[[n.nr,t.title]])]),(0,a.Wm)(v,{onContentChange:m.editorContent},null,8,["onContentChange"]),(0,a._)("div",null,[p,""!=t.preview?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("img",{src:t.preview,style:{width:"100%",height:"100%"}},null,8,h)])):(0,a.kq)("",!0),g,(0,a._)("input",{class:"file",id:"chooseFile",type:"file",onClick:e[2]||(e[2]=(...t)=>m.resetImageUploader&&m.resetImageUploader(...t)),onChange:e[3]||(e[3]=(...t)=>m.upload&&m.upload(...t)),accept:"image/png, image/jpeg, image/gif",ref:"imageUploader"},null,544),(0,a._)("button",{style:{"margin-left":"1rem"},type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=t=>m.resetImage())},"썸네일 삭제")]),(0,a._)("div",f,[(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>m.regArticle&&m.regArticle(...t))},"등록")])],64)}var v=i(7284),y={data:function(){return{articleId:0,contentChange:"",title:"",preview:"",file:"",citySelect:"",saveThumbnail_id:""}},components:{ToastEditor:v.Z},created(){},methods:{editorContent(t){this.contentChange=t},async regArticle(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};var e=this.contentChange;if(e=e.replace(/&nbsp;/gi,""),e=e.replace(/<br>/gi,""),e=e.replace(/ /gi,""),this.$emptyChk(this.title))return void this.$swal("","제목을 입력해주세요.","warning");if(this.$emptyChk(this.citySelect))return void this.$swal("","도시를 선택하세요.","warning");if("<p></p>"==e||""==e)return void this.$swal("","내용을 입력해주세요.","warning");if(""!=this.file){const t={"content-type":"multipart/form-data"},e=new FormData;e.append("multiFile",this.file),await this.$axios.post("/api/common/file-upload",e,{imageheaders:t}).then((t=>{this.saveThumbnail_id=t.data[0].fileId})).catch((()=>{})).finally((()=>{}))}let i={title:this.title,content:this.contentChange,thumbnailId:this.saveThumbnail_id,city:this.citySelect};await this.$axios.post("/api/adm/tour/new-tour",i,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.$swal("","저장되었습니다.","success"),this.$router.push("/tourList"))})).catch((t=>(this.$swal("",t.response.data.result,"error"),!1))).finally((()=>{}))},upload(t){this.file=t.target.files[0];var e=URL.createObjectURL(this.file);this.preview=e},resetImageUploader(){this.$refs.imageUploader.value=""},resetImage(){this.file="",this.preview="",this.$refs.imageUploader.value=""}}},w=i(89);const b=(0,w.Z)(y,[["render",m],["__scopeId","data-v-39d75f7c"]]);var C=b}}]);
//# sourceMappingURL=843.734f8e95.js.map